<div class="row">
  <div class="col-md-2 col-sm-2 hidden-xs">
    <h4><%= t('categories') %></h4>
    <% @category_roots.each do |root| %>
      <%= (print_taxon root.build_taxon_tree).html_safe %>
    <% end %>
  </div>

  <div class="col-md-10 col-sm-10">

    <div class="col-md-12 col-sm-12 col-xs-12">
      <h2><%= @category.name %></h2>
    </div>

  <% @products.each_with_index do |product, i| %>

    <script>
      ga("ec:addImpression", {
        "id": '<%= product.sku %>',
        "name": '<%= product.name %>',
        "price": '<%= product.price %>',
        "category": '<%= product.category.name %>',
        "position": i
      });
    </script>

    <% if i > 0 && (i % 4) == 0 %>
      <div class="clearfix visible-md-block visible-lg-block"></div>
    <% end %>

    <% if i > 0 && (i % 3) == 0 %>
      <div class="clearfix visible-sm-block"></div>
    <% end %>

    <% if i > 0 && (i % 2) == 0 %>
      <div class="clearfix visible-xs-block"></div>
    <% end %>

    <div class="col-md-3 col-sm-4 col-xs-6">
      <%= render 'helpers/product', product: product %>
    </div>
  <% end %>

  </div>

  <% if @products.length > 0 %>
    <div class="col-md-offset-1 col-md-10
                col-sm-offset-1 col-sm-10
                col-xs-12">

                <p class='text-center'>
                  <%= link_to(t('previous'), products_path(page: (@page-1))) unless @page==1%>
                  <%= link_to(@page-2, products_path(page: (@page-2))) unless @page<2%>
                  <%= link_to(@page-1, products_path(page: (@page-1))) unless @page==1%>
                  <%= @page unless @pages==1%>
                  <%= link_to(@page+1, products_path(page: (@page+1))) unless @page > @pages-1%>
                  <%= link_to(@page+2, products_path(page: (@page+2))) unless @page > @pages-2%>
                  <%= link_to(t('next'), products_path(page: (@page+1))) unless @page <= @pages %>
                </p>
    </div>
  <% end %>
</div>
